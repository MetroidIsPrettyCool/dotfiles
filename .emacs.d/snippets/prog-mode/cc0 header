# -*- mode: snippet -*-
# name: cc0 header
# key: cc0
# condition: yas-not-string-or-comment-condition
# type: command
# --
(let ((outer-buffer (current-buffer)))
  (with-temp-buffer
    ;; TODO: figure out more precisely what we should clone from the parent mode. This is just every variable I could
    ;; find defined that started with `comment-*'
    (dolist (var '(comment-add
                   comment-auto-fill-only-comments
                   comment-column
                   comment-combine-change-calls
                   comment-continue
                   comment-empty-lines
                   comment-end
                   comment-end-can-be-escaped
                   comment-end-skip
                   comment-fill-column
                   comment-indent-function
                   comment-inline-offset
                   comment-insert-comment-function
                   comment-line-break-function
                   comment-multi-line
                   comment-padding
                   comment-quote-nested
                   comment-quote-nested-function
                   comment-region-function
                   comment-start
                   comment-start-skip
                   comment-style
                   comment-styles
                   comment-use-global-state
                   comment-use-syntax
                   comment-use-syntax-ppss))
      (when-let* ((entry (assq var (buffer-local-variables outer-buffer))))
        (set (make-local-variable var) (cdr entry))))

    (insert "Any copyright is dedicated to the Public Domain.\n")
    (insert "http://creativecommons.org/publicdomain/zero/1.0/")
    (comment-region (point-min) (point-max))
    (insert-into-buffer outer-buffer)))